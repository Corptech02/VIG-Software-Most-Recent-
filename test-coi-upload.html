<!DOCTYPE html>
<html>
<head>
    <title>Test COI Upload</title>
</head>
<body>
    <h1>Test COI Upload to Backend</h1>
    <button onclick="testUpload()">Test Upload</button>
    <pre id="result"></pre>
    
    <script>
    function testUpload() {
        const url = 'https://frenzily-nonacculturated-collin.ngrok-free.dev/api/coi/upload';
        const payload = {
            policy_number: 'TEST-123',
            pdf_base64: 'JVBERi0xLjQKJeLjz9MKMyAwIG9iago=',
            filename: 'test_coi.pdf',
            uploaded_by: 'Test Script'
        };

        const xhr = new XMLHttpRequest();
        xhr.open('POST', url, true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.setRequestHeader('ngrok-skip-browser-warning', 'true');
        xhr.timeout = 10000;

        xhr.onload = function() {
            document.getElementById('result').textContent = 
                'Status: ' + xhr.status + '\n' + 
                'Response: ' + xhr.responseText;
        };

        xhr.onerror = function() {
            document.getElementById('result').textContent = 
                'Error: Network error';
        };

        xhr.ontimeout = function() {
            document.getElementById('result').textContent = 
                'Error: Timeout';
        };

        xhr.send(JSON.stringify(payload));
    }
    </script>
</body>
</html>
